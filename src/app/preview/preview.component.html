<app-header></app-header>

<div class="dashboard-main-wrapper">
    <div class="preview-filters">
        <div class="horizontal-filters-wrapper">
            <div class="horizonal-filter-bar">
                <div class="filter-inner" style="width: 98%;">
                    <div class="filter-left-heading" style="font-size:16px;">
                        First Degree
                    </div>
                    <div class="filter-single" style="width:15%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingFirstNode" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngFor="let node_select1 of node_selects1; let i = index">
                                            {{ node_select1.pair_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:30%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingFirstSource" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="sourceNodesFirst.length==0">No any source selected</option>
                                        <option *ngFor="let sourceNode of sourceNodesFirst; let i = index">
                                            {{ sourceNode.source_node_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:25%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingFirstEdgeType" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="edgeTypesFirst.length==0">No any edge type selected</option>
                                        <option *ngFor="let edgeTypesFirst of edgeTypesFirst; let i = index">
                                            {{ edgeTypesFirst.edge_type_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:30%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingFirstDestination" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="destinationNodesFirst.length==0">No any destination selected
                                        </option>
                                        <option *ngFor="let destinationNode1 of destinationNodesFirst; let i = index">
                                            {{ destinationNode1.destination_node_name }}
                                        </option>

                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="horizonal-filter-bar" *ngIf="node_selects2.length > 0">
                <div class="filter-inner" style="width: 98%;">
                    <div class="filter-left-heading" style="font-size:16px;">
                        Second Degree
                    </div>
                    <div class="filter-single" style="width:15%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingSecondNode" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngFor="let node_select2 of node_selects2; let i = index">
                                            {{ node_select2.pair_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:30%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingSecondSource" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="sourceNodesSecond.length==0">No any source selected</option>
                                        <option *ngFor="let sourceNode2 of sourceNodesSecond; let i = index">
                                            {{ sourceNode2.source_node_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:25%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingSecondEdgeType" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="edgeTypesSecond.length==0">No any edge type selected</option>
                                        <option *ngFor="let edgeTypesSecond of edgeTypesSecond; let i = index">
                                            {{ edgeTypesSecond.edge_type_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:30%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingSecondDestination" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="destinationNodesSecond.length==0">No any destination selected
                                        </option>
                                        <option *ngFor="let destinationNode2 of destinationNodesSecond; let i = index">
                                            {{ destinationNode2.destination_node_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="horizonal-filter-bar" *ngIf="node_selects3.length>0">
                <div class="filter-inner" style="width: 98%;">
                    <div class="filter-left-heading" style="font-size:16px;">
                        Third Degree
                    </div>
                    <div class="filter-single" style="width:15%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingThirdNode" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngFor="let node_select3 of node_selects3; let i = index">
                                            {{ node_select3.pair_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:30%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingThirdSource" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="sourceNodesThird.length==0">No any source selected</option>
                                        <option *ngFor="let sourceNode3 of sourceNodesThird; let i = index">
                                            {{ sourceNode3.source_node_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:25%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingThirdEdgeType" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="edgeTypesThird.length==0">No any edge type selected</option>
                                        <option *ngFor="let edgeTypesThird of edgeTypesThird; let i = index">
                                            {{ edgeTypesThird.edge_type_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-single" style="width:30%;">
                        <div class="sidebar-card">
                            <div class="body">
                                <div class="search-input">
                                    <img *ngIf="loadingThirdDestination" width="20px"
                                        src="../../assets/images/loader_small.gif" />
                                    <select name="" id="" class="form-control">
                                        <option *ngIf="destinationNodesThird.length==0">No any destination selected
                                        </option>
                                        <option *ngFor="let destinationNode3 of destinationNodesThird; let i = index">
                                            {{ destinationNode3.destination_node_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Result set Shown here -->
    <div class="inner-wrapper px-3">
        <div class="search-options">
            <div class="card-panel-box">
                <div class="customTable" style="border: 0px solid #ddd; min-height:400px;">

                    <div class="text-muted fs-2 text-center mb-4" *ngIf="(masterListsDataDetailsLengthLevelOne==0)">
                        Please
                        select
                        with user dashboard</div>

                    <div class="card-panel-box-detail p-0">
                        <div class="customTable " id="eventListTable">
                            <div class="overlay text-center" *ngIf="loadingDesc">
                                <img style="margin:185px 653px;" src="../../assets/images/loader_big.gif" />
                            </div>
                            <div class="table-responsive custom-fixed-header-table table table-striped table-hover"
                                [ngClass]="toggleLevels == false ? 'hiddenLevels' : currentLevel == '1' ? 'level1' : currentLevel == 2 ? 'level2' : 'level3'">

                                <div>
                                    <span class="float-start text-white p-1 mr-2 level1-title"
                                        *ngIf="firstLoadApiResult!=undefined && masterListsDataDetailsLengthLevelOne > 0">First
                                        Degree Combinations
                                        <span
                                            class="badge bg-primary text-white">{{masterListsDataDetailsLengthLevelOne}}</span></span>
                                    <span class="float-start text-white p-1 level2-title"
                                        *ngIf="secondLoadApiResult!=undefined && masterListsDataDetailsLengthLevelTwo > 0">Second
                                        Degree Combinations
                                        <span
                                            class="badge bg-primary text-white">{{masterListsDataDetailsLengthLevelTwo}}</span></span>
                                    <span class="float-start text-white p-1 level3-title"
                                        *ngIf="thirdLoadApiResult!=undefined && masterListsDataDetailsLengthLevelThree > 0">Third
                                        Degree Combinations
                                        <span
                                            class="badge bg-primary text-white">{{masterListsDataDetailsLengthLevelThree}}</span></span>
                                </div>

                                                    <div>{{scenarioName}}</div>

                                <table id="showEventDescriptionP" data-toolbar="#toolbar" data-search="true"
                                    data-show-export="true" data-export-options='{"fileName": "evolverAI"}'
                                    data-show-columns="true" data-page-size="100" data-filter-control="true"
                                    data-page-list="[10, 25, 50, 100, all]" class="table-striped">
                                    <!--<table id="showEventDescription" data-toolbar="#toolbar" data-search="true" data-page-size="50" data-page-list="[10, 25, 50, 100, All]">-->
                                    <thead>
                                        <tr>
                                            <th data-field="news_id" data-sortable="true" width="10%">#</th>
                                            <th data-field="sourcenode_name" data-sortable="true" width="10%"
                                                data-filter-control="input">Source</th>
                                            <th data-field="destinationnode_name" data-sortable="true" width="10%"
                                                data-filter-control="input">Destination</th>
                                            <th data-field="level" data-sortable="true" width="10%"
                                                data-filter-control="select" data-tableexport-value="Level">
                                                Level</th>
                                            <!-- <th data-field="edgeTypes" data-sortable="true" width="10%"
                                                data-filter-control="input">
                                                Edge Type</th> -->
                                            <th data-field="pmidCount" data-sortable="true" width="10%"
                                                data-filter-control="select" data-tableexport-value="PMID Count">
                                                PMID Count</th>
                                            <!-- <th data-filter-control="select" data-field="article_count" data-sortable="true" width="10%">
                                                    Articles Count</th> -->
                                            <th data-field="edgeNeCount" width="10%">
                                            </th>

                                            <!-- <th data-field="edgeNe" data-sortable="true" width="10%">
                                                Get Edge Type Article</th> -->
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>                        
                    </div>

                    <div *ngIf="!notEmptyPost">
                        <div class="alert alert-warning">
                            No More Records..
                        </div>
                    </div>

                    <div class="text-center" *ngIf="isloading"><img src="./assets/images/spinner_small_loader.gif">
                    </div>
                    <div class="text-center">
                        <button *ngIf="!isloading && notEmptyPost && firstCompleteApiResult!=undefined"
                            (click)="onDescScroll()" class="loadMoreBtn">Load More</button>
                    </div>

                    <!-- <a class="dropdown-item" class="text-dark m-1" style="cursor: pointer;"
                        (click)="captureScenario(userScenario)">
                        <span class="fa fa-save"></span> Save Query
                      </a> -->

                </div>

            </div>

            <!-- <button class="btn btn-primary" (click)="gotoPageTop()">Go to top</button> -->

        </div>
    </div>
</div>

<ng-template #articleModal let-c="close" let-d="dismiss">
    <div class="modal-content modal-fullscreen" id="articleModal">
        <div class="modal-header blue_bg_hdr modal-lg">
            <h4 class="modal-title">Article(s) </h4>
            <button class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body white_bg without_bord_rad">
            <div class="row">
                <div class="col-md-12 bottam-buffer home_tiles modal-event-articles">

                    <div class="m-1">
                        <div class="fade show">

                            <!-- <div *ngFor="let article of articleHere">
                            <p>PMID: {{article.pmid}}</p>
                            <p>Publication Date: {{article.publication_date}}</p>
                            <p>Title: {{article.title}}</p>
                            <hr>
                        </div> -->
                            <table id="articles_details" data-toolbar="#toolbar" data-search="true"
                                data-show-export="true" data-show-columns="true" data-page-size="50"
                                data-filter-control="true" data-page-list="[10, 25, 50, 100, All]">
                                <thead>
                                    <tr>
                                        <th data-field="id" data-sortable="true" width="2%">
                                            #
                                        </th>
                                        <th data-field="source" data-sortable="true" width="10%"
                                            data-filter-control="input">
                                            Source
                                        </th>
                                        <th data-field="destination" data-sortable="true" width="10%"
                                            data-filter-control="input">
                                            Destination
                                        </th>
                                        <th data-field="pmid" data-sortable="true" width="10%"
                                            data-filter-control="input">
                                            PMID
                                        </th>
                                        <th data-field="publication_date" data-sortable="true" width="10%"
                                            data-filter-control="input">
                                            Publication Date
                                        </th>
                                        <th data-field="title" data-sortable="true" width="10%"
                                            data-filter-control="input">
                                            Title
                                        </th>
                                        <th data-field="edge_type" data-sortable="true" width="10%"
                                            data-filter-control="input">
                                            Edge Type
                                        </th>
                                        <th data-field="sentence_btn" data-sortable="false" width="10%">
                                            Evidence
                                        </th>

                                    </tr>
                                </thead>
                            </table>
                            <div class="text-center" *ngIf="loaderArticle">
                                <img src="../../assets/images/loader_big.gif" />
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="overlay" *ngIf="loaderEvidence">
                <img style="margin:185px 653px;" src="../../assets/images/loader_big.gif" />
            </div>
        </div>

        <div class="modal-footer">
            <a class="btn btn-primary " (click)="scrollTop()">Go to top</a>
        </div>
    </div>

</ng-template>
